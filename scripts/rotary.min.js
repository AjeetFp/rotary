var rotateDial=function(t,e,o){var a=getRotationDegrees(o.parent()),r=(55-getRotationDegrees(o.parent())+360)%360,n=e.pageX||e.originalEvent.touches[0].pageX,s=e.pageY||e.originalEvent.touches[0].pageY,i=n-t.offset().left-t.width()/2,u=-1*(s-t.offset().top-t.height()/2),l=Math.atan2(u,i)*(180/Math.PI),f=convertThetaToCssDegs(l,a),g=t.find(".dial");if(!(f>r+55||0>f||f<getRotationDegrees(g))){var m="rotate("+f+"deg)";g.css({transform:m,"-webkit-transform":m,"-moz-transform":m,"-ms-transform":m})}},convertThetaToCssDegs=function(t,e){var o=90-t-e;return o=(o+360)%360},getRotationDegrees=function(t){var e,o=t[0],a=window.getComputedStyle(o,null),r=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("-moz-transform")||a.getPropertyValue("-ms-transform")||a.getPropertyValue("-o-transform")||a.getPropertyValue("transform");if("none"!==r){var n=r.split("(")[1].split(")")[0].split(","),s=n[0],i=n[1];e=Math.round(Math.atan2(i,s)*(180/Math.PI))}else e=0;return 0>e?e+360:e},populateInput=function(t,e){var o=40,a=30,r=getRotationDegrees(e),n=0;o>r||(o+1*a>r?n=1:o+2*a>r?n=2:o+3*a>r?n=3:o+4*a>r?n=4:o+5*a>r?n=5:o+6*a>r?n=6:o+7*a>r?n=7:o+8*a>r?n=8:o+9*a>r&&(n=9),t.val(""+t.val()+n).change())},init=function(){$(".controls").show(),$("body").removeClass("nojs"),$("[data-rotary]").each(function(){var t=$(this),e=$(t.attr("data-rotary")),o=e.find(".rotary");o.on("mousedown touchstart",".hole",function(e){e.preventDefault();var a=o.find(".dial"),r=$(this);0===getRotationDegrees(a)&&(a.removeClass("smooth"),$("body").on("mousemove touchmove",function(t){rotateDial(o,t,r)}),$(document).one("mouseup touchend",function(){$("body").off("mousemove touchmove"),a.addClass("smooth").attr("style",""),populateInput(t,a)}))}),t.on("change",function(){var e=t.val();0===e.length?$("#call").removeAttr("href"):$("#call").attr("href","tel:"+e)})})};$(document).ready(function(){init()});