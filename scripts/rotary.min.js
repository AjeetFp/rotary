var rotateDial=function(t,e,o){var n=getRotationDegrees(o.parent()),a=(55-getRotationDegrees(o.parent())+360)%360,r=e.pageX||e.originalEvent.touches[0].pageX,i=e.pageY||e.originalEvent.touches[0].pageY,s=r-t.offset().left-t.width()/2,u=-1*(i-t.offset().top-t.height()/2),l=Math.atan2(u,s)*(180/Math.PI),f=convertThetaToCssDegs(l,n),c=t.find(".dial");if(!(f>a+55||0>f||f<getRotationDegrees(c))){var m="rotate("+f+"deg)";c.css({transform:m,"-webkit-transform":m,"-moz-transform":m,"-ms-transform":m})}},convertThetaToCssDegs=function(t,e){var o=90-t-e;return o=(o+360)%360},getRotationDegrees=function(t){var e,o=t[0],n=window.getComputedStyle(o,null),a=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");if("none"!==a){var r=a.split("(")[1].split(")")[0].split(","),i=r[0],s=r[1];e=Math.round(Math.atan2(s,i)*(180/Math.PI))}else e=0;return 0>e?e+360:e},calculateNum=function(t,e){var o=40,n=30,a=getRotationDegrees(e),r=0;return o>a?void 0:(o+1*n>a?r=1:o+2*n>a?r=2:o+3*n>a?r=3:o+4*n>a?r=4:o+5*n>a?r=5:o+6*n>a?r=6:o+7*n>a?r=7:o+8*n>a?r=8:o+9*n>a&&(r=9),r)},init=function(){$(".controls").show(),$("body").removeClass("nojs"),$("[data-rotary]").each(function(){var t=$(this),e=$(t.attr("data-rotary")),o=e.find(".rotary");o.on("mousedown touchstart",".hole",function(e){e.preventDefault();var n=o.find(".dial"),a=$(this);0===getRotationDegrees(n)&&(n.removeClass("smooth"),$("body").on("mousemove touchmove",function(t){rotateDial(o,t,a)}),$(document).one("mouseup touchend",function(){var e=calculateNum(t,n);$("body").off("mousemove touchmove"),n.addClass("smooth").attr("style",""),n.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(o){"undefined"!=typeof e&&t.val(""+t.val()+e).change()})}))}),t.on("change",function(){var e=t.val();0===e.length?$("#call").removeAttr("href"):$("#call").attr("href","tel:"+e)})})};$(document).ready(function(){init()});